<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>注文編集</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='base-style.css') }}">
</head>
<body>
    <h1>注文を編集</h1>
    <ul class="breadcrumb">
        <li><a href="{{ url_for('index') }}">HOME</a></li>
        <li><a href="{{ url_for('order.list') }}">注文一覧</a></li>
        <li>注文の編集</li>
    </ul>

    <form action="{{ url_for('order.edit', order_id=order.id) }}" method="post">
        <label>ユーザー: 
            <select name="user_id" required>
                {% for user in users %}
                    <option value="{{ user.id }}" {% if order.user.id == user.id %}selected{% endif %}>{{ user.name }}</option>
                {% endfor %}
            </select>
        </label><br>
        <label>製品: 
            <select name="product_id" required>
                {% for product in products %}
                    <option value="{{ product.id }}" {% if order.product.id == product.id %}selected{% endif %}>{{ product.name }}</option>
                {% endfor %}
            </select>
        </label><br>
        <label>日付: 
            <select name="year" required>
                {% set sy = selected_year|default(None) %}
                {% for y in years %}
                    <option value="{{ y }}" {% if (sy and sy|int == y) or (not sy and order.order_date and order.order_date.year == y) %}selected{% endif %}>{{ y }}年</option>
                {% endfor %}
            </select>
            <select name="month" required>
                {% set sm = selected_month|default(None) %}
                {% for m in months %}
                    <option value="{{ m }}" {% if (sm and sm|int == m) or (not sm and order.order_date and order.order_date.month == m) %}selected{% endif %}>{{ m }}月</option>
                {% endfor %}
            </select>
            <select name="day" required>
                {% set sd = selected_day|default(None) %}
                {% for d in days %}
                    <option value="{{ d }}" {% if (sd and sd|int == d) or (not sd and order.order_date and order.order_date.day == d) %}selected{% endif %}>{{ d }}日</option>
                {% endfor %}
            </select>
        </label><br>
        {% if error %}
        <p class="error">{{ error }}</p>
        {% endif %}
        <button type="submit">保存</button>
    </form>
</body>
</html>
