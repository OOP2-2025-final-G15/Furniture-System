<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>注文追加</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='base-style.css') }}">
</head>
<body>
    <h1>新しい注文を追加</h1>
    <ul class="breadcrumb">
        <li><a href="{{ url_for('index') }}">HOME</a></li>
        <li><a href="{{ url_for('order.list') }}">注文一覧</a></li>
        <li>新規注文</li>
    </ul>
    
    <form action="{{ url_for('order.add') }}" method="post">
        <label>ユーザー: 
            <select name="user_id" required>
                {% for user in users %}
                    <option value="{{ user.id }}">{{ user.name }}</option>
                {% endfor %}
            </select>
        </label><br>
        <label>製品: 
            <select name="product_id" required>
                {% for product in products %}
                    <option value="{{ product.id }}">{{ product.name }}</option>
                {% endfor %}
            </select>
        </label><br>
        <label>日付: 
            <select name="year" required>
                {% for y in years %}
                    {% set sy = selected_year|default(None) %}
                    <option value="{{ y }}" {% if (sy and sy|int == y) or (not sy and y == default_year) %}selected{% endif %}>{{ y }}年</option>
                {% endfor %}
            </select>
            <select name="month" required>
                {% for m in months %}
                    {% set sm = selected_month|default(None) %}
                    <option value="{{ m }}" {% if (sm and sm|int == m) or (not sm and m == default_month) %}selected{% endif %}>{{ m }}月</option>
                {% endfor %}
            </select>
            <select name="day" required>
                {% for d in days %}
                    {% set sd = selected_day|default(None) %}
                    <option value="{{ d }}" {% if (sd and sd|int == d) or (not sd and d == default_day) %}selected{% endif %}>{{ d }}日</option>
                {% endfor %}
            </select>
        </label><br>
        {% if error %}
        <p class="error">{{ error }}</p>
        {% endif %}
        <button type="submit">追加</button>
    </form>
</body>
</html>
